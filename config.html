<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>Flare Dashboard | Configure</title>
    <link rel="stylesheet" href="./static/froala.css" media="screen">
    <link rel="stylesheet" href="./static/config.css" media="screen">
    <script class="u-script" type="text/javascript" src="./static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="./static/bundle.js" defer=""></script>
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:200,200i,300,300i,400,400i,600,600i,700,700i,900|Lato:100,100i,300,300i,400,400i,700,700i,900,900i">
  </head>
  <body data-path-to-root="./" data-include-products="false" class="u-body u-overlap u-overlap-transparent u-xl-mode" data-lang="en"><header class="u-clearfix u-header u-header" id="sec-bbaf"><div class="u-clearfix u-sheet u-sheet-1">
        <a href="https://github.com/t-a-g-o/flare-dashboard/" class="u-hover-feature u-image u-logo u-image-1" data-image-width="1920" data-image-height="408" title="[]">
          <img src="images/webdash.png" class="u-logo-image u-logo-image-1">
        </a>
        <nav class="u-menu u-menu-hamburger u-offcanvas u-menu-1" data-responsive-from="XL" data-submenu-level="on-click">
          <div class="menu-collapse">
            <a class="u-button-style u-file-icon u-nav-link u-text-white u-file-icon-1" href="#">
              <img src="./images/menu.png" alt="">
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/dashboard" style="padding-right: 0px;">Dashboard</a>
            </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/log" style="padding-right: 0px;">Flare Logging</a>
            </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/secrets" style="padding-right: 0px;">Secret Keys</a>
            </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/roamingkeys" style="padding-right: 0px;">Roaming License Keys</a>
            </li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="custom-expanded u-container-style u-grey-15 u-inner-container-layout u-opacity u-opacity-70 u-sidenav u-sidenav-1" data-offcanvas-width="280">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close u-menu-close-1"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-spacing-0 u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/dashboard" style="padding-top: 24px; padding-bottom: 24px;">Dashboard</a>
                </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/log" style="padding-top: 24px; padding-bottom: 24px;">Flare Logging</a>
                </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/secrets" style="padding-top: 24px; padding-bottom: 24px;">Secret Keys</a>
                </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/roamingkeys" style="padding-top: 24px; padding-bottom: 24px;">Roaming License Keys</a>
                </li></ul>
              </div>
            </div>
            <div class="u-menu-overlay"></div>
          </div>
        </nav><span class="u-file-icon u-hidden-xs u-icon u-text-white u-icon-1" data-href="https://github.com/tagoworks/flare/wiki/Flare-Dashboard" data-target="_blank" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-delay="500"><img src="./images/wiki.png" alt=""></span><span class="u-file-icon u-hidden-xs u-icon u-text-white u-icon-2" data-href="https://github.com/tagoworks/flare/issues" data-target="_blank" data-animation-name="fadeIn" data-animation-duration="1000" data-animation-delay="1000"><img src="./images/issues.png" alt=""></span><span class="u-file-icon u-hover-feature u-icon u-text-white u-icon-3" data-href="/logout" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-delay="0"><img src="./images/exit.png" alt=""></span>
      </div></header>
      <section class="u-clearfix u-custom-color-2 u-section-1" id="sec-8654">
        <div class="u-clearfix u-sheet u-sheet-1">
          <div class="custom-expanded u-custom-color-1 u-shape u-shape-rectangle u-shape-1"></div>
          <div class="custom-expanded u-container-style u-custom-color-1 u-group u-radius u-shape-round u-group-1">
            <div class="u-container-layout u-container-layout-1">
              <p class="u-custom-font u-font-titillium-web u-text u-text-default u-text-1">Configure Flare</p>
              <div class="u-container-style u-custom-color-4 u-group u-hover-feature u-radius u-shape-round u-group-2">
                <div class="u-container-layout u-container-layout-2">
                  <p class="u-custom-font u-font-lato u-text u-text-2">Discord Bot Settings</p>
                  <div class="u-form u-form-1">
                    <form id="bot-settings" class="u-clearfix u-form-spacing-18 u-form-vertical u-inner-form" source="input" name="bot-settings" style="padding: 0px;">
                      <div class="u-form-group u-form-name">
                        <label for="bottoken" class="u-label" title="Your discord bot token from the Discord developer hub">Bot Token</label>
                        <input type="text" placeholder="{{ token_saved }}" id="bot-token" name="token" class="u-border-2 u-input u-input-rectangle u-radius u-input-1" required="">
                      </div>
                      <div class="u-form-group">
                        <label for="onlysendin" class="u-label" title="The channel ID where the commands will be processed, any other channel will be ignored">Whitelist Commands Channel ID</label>
                        <input type="text" placeholder="{{ sendinid_saved }}" id="whitelist-channel-id" name="onlySendIn" class="u-border-2 u-input u-input-rectangle u-radius u-input-2" required="">
                      </div>
                      <div class="u-form-group u-form-group-3">
                        <label for="logchannel" class="u-label" title="The channel ID where information about a licenses and user will be sent and any other logging from the bot">Logging Channel ID</label>
                        <input type="text" placeholder="{{ logid_saved }}" id="logging-channel-id" name="logChannel" class="u-border-2 u-input u-input-rectangle u-radius u-input-3" required="">
                      </div>
                      <div class="u-form-group u-form-group-4">
                        <label for="serverid" class="u-label" title="The Discord server ID that the bot is in, used for permission setting">Server ID</label>
                        <input type="text" placeholder="{{ guildid_saved }}" id="guild-id" name="guildID" class="u-border-2 u-input u-input-rectangle u-radius u-input-4" required="">
                      </div>
                      <div class="u-form-group u-form-group-5">
                        <label for="ownerid" class="u-label" title="The Discord server owner ID, used for permission setting">Owner ID</label>
                        <input type="text" placeholder="{{ ownerid_saved }}" id="guild-owner-id" name="ownerID" class="u-border-2 u-input u-input-rectangle u-radius u-input-5" required="">
                      </div>
                      <div class="u-align-left u-form-group u-form-submit">
                        <button id="save-bot-settings" class="u-border-none u-btn u-btn-round u-btn-submit u-button-style u-radius u-white u-btn-1">Save</button>
                    </div>
                    </form>
                  </div>
                </div>
              </div>
              <div class="custom-expanded u-container-style u-custom-color-4 u-group u-hover-feature u-radius u-shape-round u-group-3">
                <div class="u-container-layout u-container-layout-3">
                  <p class="u-custom-font u-font-lato u-text u-text-3">WebDAV Settings</p>
                  <div class="u-form u-form-2">
                    <form id="webdav-settings" class="u-clearfix u-form-spacing-50 u-form-vertical u-inner-form" source="input" name="webdav-settings" style="padding: 10px;">
                      <div class="u-form-group u-form-name">
                        <label for="accdir" class="u-label" title="The local directory where the encrypted database folders are">Account Directory</label>
                        <input type="text" placeholder="{{ webdir_saved }}" id="webdav-directory" name="webdavDir" class="u-border-2 u-input u-input-rectangle u-radius u-input-6" required="">
                      </div>
                      <div class="u-form-group">
                        <label for="publink" class="u-label" title="Your Cloudflared public link to access the database API">Public Database Link</label>
                        <input type="text" placeholder="{{ weblink_saved }}" id="webdav-auth-link" name="webdavLink" class="u-border-2 u-input u-input-rectangle u-radius u-input-7" required="">
                      </div>
                      <div class="u-align-left u-form-group u-form-submit">
                        <button id="save-webdav-settings" class="u-border-none u-btn u-btn-round u-btn-submit u-button-style u-radius u-white u-btn-7">Save</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    <footer class="u-align-center u-clearfix u-custom-color-3 u-footer u-footer" id="sec-893c"><div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">Flare Dashboard @ {{ localip }}<br>made with&nbsp;<span class="u-file-icon u-icon u-text-white u-icon-1"><img src="./images/heart.png" alt=""></span>&nbsp;by tago
        </p>
      </div>
    </footer>
    <script>
      document.getElementById('save-bot-settings').addEventListener('click', function(e) {
        e.preventDefault();
        sendConfigData('bot-settings');
      });
      document.getElementById('save-webdav-settings').addEventListener('click', function(e) {
        e.preventDefault();
        sendConfigData('webdav-settings');
      });
      function sendConfigData(formId) {
        const form = document.getElementById(formId);
        const formData = new FormData(form);
        const jsonData = Object.fromEntries(formData);
        fetch('/config', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(jsonData)
        })
        .then(response => {
          if (response.ok) {
            window.location.reload();
          } else {
            console.error('Failed to send config data');
          }
        })
        .catch(error => {
          console.error('Error:', error);
        });
      }
      </script>
 </body>
</html>