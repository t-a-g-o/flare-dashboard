<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <title>Configuring Flare</title>
    <link rel="stylesheet" href="./static/css.css" media="screen">
    <link rel="stylesheet" href="./static/config.css" media="screen">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script class="u-script" type="text/javascript" src="./static/script.js" defer=""></script>
    <meta name="referrer" content="origin">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,500,500i,700,700i">
</head>
<body data-path-to-root="./" data-include-products="false" class="u-body u-overlap u-overlap-contrast u-overlap-transparent u-xl-mode" data-lang="en">
    <section class="u-clearfix u-custom-color-4 u-section-1" id="sec-1dad">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-custom-font u-font-ubuntu u-text u-text-default u-text-grey-15 u-text-1">Configure Flare</p>
        <div class="custom-expanded u-gradient u-radius u-shape u-shape-round u-shape-1"></div><span class="u-file-icon u-icon u-text-black u-icon-1" data-href="https://github.com/tagoworks/flare/issues" data-target="_blank"><img src="./images/issues.png" alt=""></span><span class="u-file-icon u-icon u-text-black u-icon-2" data-href="https://github.com/tagoworks/flare" data-target="_blank"><img src="./images/github.png" alt=""></span><span class="u-file-icon u-icon u-text-black u-icon-3" data-href="https://github.com/tagoworks/flare/wiki/Flare-Web-App" data-target="_blank"><img src="./images/wiki.png" alt=""></span><span class="u-file-icon u-icon u-icon-4" data-href="dashboard"><img src="./images/back.png" alt=""></span>
        <div class="u-container-style u-custom-color-3 u-group u-radius u-shape-round u-group-1">
          <div class="u-container-layout u-valign-bottom u-container-layout-1">
            <div class="u-form u-form-1">
              <form id="config-form" style="padding: 0px;">
                <div class="u-form-group u-form-name">
                  <label for="token" class="u-label">Discord Token</label>
                  <input type="text" placeholder="{{ token_saved }}" id="token" name="token" class="u-input u-input-rectangle">
                </div>
                <div class="u-form-email u-form-group">
                  <label for="guildID" class="u-label">Discord Guild ID</label>
                  <input type="text" id="guildID" name="guildID" class="u-input u-input-rectangle" placeholder="{{ guildid_saved }}">
                </div>
                <div class="u-form-group u-form-group-3">
                  <label for="ownerID" class="u-label">Discord Server Owner ID</label>
                  <input type="text" id="ownerID" name="ownerID" class="u-input u-input-rectangle" placeholder="{{ ownerid_saved }}">
                </div>
                <div class="u-form-group u-form-group-4">
                  <label for="onlySendIn" class="u-label">Whitelist Commands Channel ID</label>
                  <input type="text" placeholder="{{ sendinid_saved }}" id="onlySendIn" name="onlySendIn" class="u-input u-input-rectangle">
                </div>
                <div class="u-form-group u-form-group-5">
                  <label for="logChannel" class="u-label">Log Channel ID</label>
                  <input type="text" placeholder="{{ logid_saved }}" id="logChannel" name="logChannel" class="u-input u-input-rectangle">
                </div>
                <div class="u-form-group u-form-group-6">
                  <label for="webdavDir" class="u-label">WebDAV Directory</label>
                  <input type="text" placeholder="{{ webdir_saved }}" id="webdavDir" name="webdavDir" class="u-input u-input-rectangle">
                </div>
                <div class="u-form-group u-form-group-7">
                  <label for="webdavLink" class="u-label">WebDAV Auth Link</label>
                  <input type="text" placeholder="{{ weblink_saved }}" id="webdavLink" name="webdavLink" class="u-input u-input-rectangle">
                </div>
                <div class="u-align-left u-form-group u-form-submit">
                  <button type="button" id="submit-btn" class="u-border-none u-btn u-btn-round u-button-style u-gradient u-none u-radius u-btn-1">Save File</button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <p class="u-align-center u-text u-text-default u-text-2">Flame Web App ( 0.1 )<br>made with&nbsp; &nbsp; &nbsp; by tago
        </p><span class="u-file-icon u-icon u-text-white u-icon-5"><img src="./images/heart.png" alt=""></span>
      </div>
    </section>
    <script>
      $(document).ready(function() {
        $('#submit-btn').click(function() {
          const formData = {
            token: $('#token').val(),
            guildID: $('#guildID').val(),
            ownerID: $('#ownerID').val(),
            onlySendIn: $('#onlySendIn').val(),
            logChannel: $('#logChannel').val(),
            webdavDir: $('#webdavDir').val(),
            webdavLink: $('#webdavLink').val()
          };

          $.ajax({
            type: 'POST',
            url: '/save',
            data: JSON.stringify(formData),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function(response) {
              console.log('Config saved successfully!');
              window.location.reload();
            },
            error: function(xhr, status, error) {
              console.error('Error saving config: ', error);
            }
          });
        });
      });
    </script>
</body>
</html>