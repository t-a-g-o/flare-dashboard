<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>Flare Dashboard | Dashboard</title>
    <link rel="stylesheet" href="./static/froala.css" media="screen">
    <link rel="stylesheet" href="./static/dash.css" media="screen">
    <script class="u-script" type="text/javascript" src="./static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="./static/bundle.js" defer=""></script>
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:200,200i,300,300i,400,400i,600,600i,700,700i,900|Lato:100,100i,300,300i,400,400i,700,700i,900,900i">
  </head>
    <body data-path-to-root="./" data-include-products="false" class="u-body u-overlap u-overlap-transparent u-xl-mode" data-lang="en">
      <header class="u-clearfix u-header u-header" id="sec-bbaf">
        <div class="u-clearfix u-sheet u-sheet-1">
        <a href="https://github.com/t-a-g-o/flare-dashboard/" class="u-hover-feature u-image u-logo u-image-1" data-image-width="1920" data-image-height="408" title="[]">
          <img src="./images/webdash.png" class="u-logo-image u-logo-image-1">
        </a>
        <nav class="u-menu u-menu-hamburger u-offcanvas u-menu-1" data-responsive-from="XL" data-submenu-level="on-click">
          <div class="menu-collapse">
            <a class="u-button-style u-file-icon u-nav-link u-text-white u-file-icon-1" href="#">
              <img src="./images/menu.png" alt="">
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/dashboard" style="padding-right: 0px;">Dashboard</a>
            </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/log" style="padding-right: 0px;">Flare Logging</a>
            </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/secrets" style="padding-right: 0px;">Secret Keys</a>
            </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/roamingkeys" style="padding-right: 0px;">Roaming License Keys</a>
            </li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="custom-expanded u-container-style u-grey-15 u-inner-container-layout u-opacity u-opacity-70 u-sidenav u-sidenav-1" data-offcanvas-width="280">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close u-menu-close-1"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-spacing-0 u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/dashboard" style="padding-top: 24px; padding-bottom: 24px;">Dashboard</a>
                </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/log" style="padding-top: 24px; padding-bottom: 24px;">Flare Logging</a>
                </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/secrets" style="padding-top: 24px; padding-bottom: 24px;">Secret Keys</a>
                </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/roamingkeys" style="padding-top: 24px; padding-bottom: 24px;">Roaming License Keys</a>
                </li></ul>
              </div>
            </div>
            <div class="u-menu-overlay"></div>
          </div>
        </nav><span class="u-file-icon u-hidden-xs u-icon u-text-white u-icon-1" data-href="https://github.com/tagoworks/flare/wiki/Flare-Dashboard" data-target="_blank" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-delay="500"><img src="./images/wiki.png" alt=""></span><span class="u-file-icon u-hidden-xs u-icon u-text-white u-icon-2" data-href="https://github.com/tagoworks/flare/issues" data-target="_blank" data-animation-name="fadeIn" data-animation-duration="1000" data-animation-delay="1000"><img src="./images/issues.png" alt=""></span><span class="u-file-icon u-hover-feature u-icon u-text-white u-icon-3" data-href="/logout" data-animation-name="customAnimationIn" data-animation-duration="1000" data-animation-delay="0"><img src="./images/exit.png" alt=""></span>
      </div>
    </header>
    <section class="u-clearfix u-custom-color-2 u-section-1" id="sec-8654">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="custom-expanded u-custom-color-1 u-shape u-shape-rectangle u-shape-1"></div>
        <div class="custom-expanded u-container-style u-custom-color-1 u-group u-radius u-shape-round u-group-1">
          <div class="u-container-layout u-container-layout-1">
            <p class="u-custom-font u-font-titillium-web u-hover-feature u-text u-text-default u-text-1">{{ greeting }}, {{ name }}</p>
            <div class="u-container-style u-custom-color-4 u-group u-hover-feature u-radius u-shape-round u-group-2">
              <div class="u-container-layout u-container-layout-2"><span class="u-custom-color-6 u-file-icon u-icon u-icon-rounded u-opacity u-opacity-85 u-radius u-text-palette-3-base u-icon-1"><img src="./images/dashboard/key.png" alt=""></span>
                <p class="u-align-left u-custom-font u-font-lato u-text u-text-2">License Keys Remaining</p>
                <p class="u-custom-font u-font-lato u-text u-text-palette-3-light-2 u-text-3">{{ licenses_stored }}</p>
              </div>
            </div>
            <div class="u-container-style u-custom-color-4 u-group u-hover-feature u-radius u-shape-round u-group-3" data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction="">
              <div class="u-container-layout u-container-layout-3"><span class="u-file-icon u-icon u-icon-rounded u-palette-1-light-2 u-radius u-text-palette-1-base u-icon-2"><img src="./images/dashboard/accs.png" alt=""></span>
                <p class="u-custom-font u-font-lato u-text u-text-4">Total Validated Keys</p>
                <p class="u-custom-font u-font-lato u-text u-text-palette-3-light-2 u-text-5">{{ keys_activated }}</p>
              </div>
            </div>
            <div class="u-container-style u-custom-color-4 u-group u-hover-feature u-radius u-shape-round u-group-4" data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction="">
              <div class="u-container-layout u-container-layout-4">
                <p class="u-custom-font u-font-lato u-text u-text-6">Recent Accounts</p>
                <p class="u-custom-font u-font-lato u-text u-text-palette-3-light-2 u-text-7">{{ recent_validates }}</p>
              </div>
            </div>
            <div class="u-container-style u-custom-color-4 u-group u-hover-feature u-radius u-shape-round u-group-5" data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction="">
              <div class="u-container-layout u-valign-top-sm u-valign-top-xs u-container-layout-5">
                <p class="u-custom-font u-font-lato u-text u-text-8">USEFUL PAGES&nbsp;&nbsp;<span class="u-file-icon u-icon u-text-white u-icon-3"><img src="images/dashboard/tools.png" alt=""></span>
                </p>
                <a href="/roamingkeys" class="u-border-none u-btn u-btn-round u-button-style u-custom-color-6 u-radius u-btn-1">All Active Keys</a>
                <a href="/log" class="u-border-none u-btn u-btn-round u-button-style u-custom-color-6 u-radius u-btn-2">View Service Log</a>
                <a href="/secrets" class="u-border-none u-btn u-btn-round u-button-style u-custom-color-6 u-radius u-btn-3">View Secret Identifiers</a>
                <a href="/config" class="u-border-none u-btn u-btn-round u-button-style u-custom-color-6 u-radius u-btn-4">//Configure</a>
              </div>
            </div>
            <div class="u-container-style u-custom-color-4 u-group u-hover-feature u-radius u-shape-round u-group-6" data-animation-name="" data-animation-duration="0" data-animation-delay="0" data-animation-direction="">
              <div class="u-container-layout u-container-layout-6">
                <p class="u-custom-font u-font-lato u-text u-text-9">Command Line</p>
                <div class="u-align-left u-border-2 u-border-grey-75 u-container-style u-custom-color-4 u-group u-radius u-shape-round u-group-7">
                  <div class="u-container-layout u-valign-middle-lg u-valign-middle-xl u-container-layout-7">
                    <h3 class="u-text u-text-10">Enter a command and see its output here</h3>
                  </div>
                </div>
                <div class="custom-expanded u-form u-form-1">
                  <form class="u-clearfix u-form-horizontal u-form-spacing-10 u-inner-form" source="email" name="command" style="padding: 10px;">
                    <div class="u-form-email u-form-group">
                      <input type="text" placeholder="Enter command to send to server" id="command-string" name="command" class="u-input u-input-rectangle u-radius u-input-1" required="">
                    </div>
                    <div class="u-align-left u-form-group u-form-submit">
                      <a href="#" id="submit" class="u-border-none u-btn u-btn-round u-btn-submit u-button-style u-grey-5 u-radius u-btn-5">Send</a>
                      <input type="submit" id="submit" class="u-form-control-hidden">
                    </div>
                  </form>
                  <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const form = document.querySelector('.u-inner-form');
                        form.addEventListener('submit', function(event) {
                            event.preventDefault();
                            const commandInput = document.getElementById('command-string');
                            const command = commandInput.value;
                            const payload = {
                                command: command
                            };
                            fetch('/send', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify(payload)
                            })
                            .then(response => {
                                if (!response.ok) {
                                    throw new Error('Network response was not ok');
                                }
                                return response.json();
                            })
                            .then(data => {
                                console.log('Server response:', data);
                                setTimeout(() => {
                                    fetch('/update?type=terminal')
                                        .then(response => {
                                            if (!response.ok) {
                                                throw new Error('Network response was not ok');
                                            }
                                            return response.json();
                                        })
                                        .then(updatedData => {
                                            const terminalLog = updatedData.terminalLog;
                                            const textElement = document.querySelector('.u-text-10');
                                            textElement.innerHTML = updatedData.terminalLog;
                                        })
                                        .catch(error => {
                                            console.error('Error fetching updated content:', error);
                                        });
                                }, 1000);
                            })
                            .catch(error => {
                                console.error('Error sending command:', error);
                            });
                        });
                    });
                  </script>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer class="u-align-center u-clearfix u-custom-color-3 u-footer u-footer" id="sec-893c">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">Flare Dashboard @ {{ localip }}<br>made with&nbsp;<span class="u-file-icon u-icon u-text-white u-icon-1"><img src="./images/heart.png" alt=""></span>&nbsp;by tago
        </p>
      </div>
    </footer>
  </body>
</html>